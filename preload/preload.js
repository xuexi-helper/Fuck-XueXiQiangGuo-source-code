module.exports=function(){const e=require("./paths.js"),{domContentLoadedThen:t,createArrayOf:s}=require("./util.js"),{onLogin:o,isLoggedIn:i}=require("./login.js"),{getScoreMethods:r,isDone:n,getTheGapOf:a,findScoreMethodsByNames:d}=require("./score.js"),{lock:c,unlock:l,islocked:u}=require("./lock.js"),{TaskList:h,taskTypes:g}=require("./tasks.js"),f=require("./update.js");t(async()=>{if(location.href.startsWith(e.loginPage))return o(),void f();if(!i())return void(location.href="https://pc.xuexi.cn/points/login.html?ref=https://www.xuexi.cn/");if(!u()){const e=await r(),[t,o,i,l]=d(e,["阅读文章","观看视频","文章时长","视频时长"]);if(h.tasks=[],n(t)&&n(i)||h.add(g[0]),h.add(...s(g[1],a(t)),...s(g[2],a(i))),n(o)&&n(l)||h.add(g[3]),h.add(...s(g[4],a(o)),...s(g[5],a(l))),0==h.tasks.length)return;c()}const t=h.getAll();h.doAll(t),0==t.length&&l()})}();