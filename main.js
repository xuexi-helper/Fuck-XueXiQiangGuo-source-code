!function(){const e=require("path"),{app:n,BrowserWindow:o,ipcMain:s}=require("electron"),{getRandomNumberBetween:t}=require("./preload/util.js");let l=null,r=!1;const a=process.argv.includes("headless")||process.argv.includes("--headless"),i=process.argv.includes("dev")||process.argv.includes("--dev");n.commandLine.appendSwitch("autoplay-policy","no-user-gesture-required"),n.on("window-all-closed",function(){n.quit()}),n.on("ready",function(){(l=new o({title:"Fuck 学习强国",width:1e3,height:600,show:!1,icon:e.join(__dirname,"logo.png"),webPreferences:{nodeIntegration:!1,webSecurity:!a,preload:e.join(__dirname,"preload/preload.js")}})).setMenu(null),i&&l.webContents.openDevTools(),l.webContents.setUserAgent("Mozilla/5.0 AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0 Safari/537.36"),l.loadURL("https://www.xuexi.cn/"),l.once("ready-to-show",()=>{l.show()}),l.on("closed",()=>{l=null}),l.webContents.on("new-window",(e,n)=>{e.preventDefault(),l.webContents.loadURL(n)}),l.webContents.setAudioMuted(!0),setInterval(async()=>{await new Promise(e=>{setTimeout(()=>{e()},1e3*t(0,2e3))}),r||l.webContents.reload()},864e5)}),s.on("lock",()=>{r=!0}),s.on("unlock",()=>{r=!1}),s.on("islocked",e=>{e.returnValue=r});let d=[];s.on("tasks-getAll",e=>{e.returnValue=d}),s.on("tasks-set",(e,n)=>{d=n}),s.on("tasks-add",(e,...n)=>{i&&console.log(n),d.push(...n)}),s.on("isHeadless",e=>{e.returnValue=a}),s.on("log",(e,...n)=>{console.log(...n)})}();